---
# setup requirements for k8s
- include: 'k8s/1_setup_k8s_requirements.yaml'

# install and configure keepalived
- include: 'keepalived/1_install_keepalived.yaml'

# install haproxy
- include: 'haproxy/1_install_haproxy.yaml'

# init first master node
- include: 'k8s/2_init_first_master.yaml'

# generate cert and string for connetcion
- include: 'k8s/3_generate_cert_and_init.yaml'

# add other controls
- include: 'k8s/4_init_other_masters.yaml'

# add workers
- include: 'k8s/5_init_workers.yaml'

# add CNI
- include: 'k8s/6_init_network_provider.yaml'
- include: 'k8s/7_install_helm.yaml'

- include: 'openebs/1_configure_linux.yaml'
- include: 'openebs/2_configure_openebs.yaml'


## configure glusterfs
#- include: 'glusterfs/1_install_glusterfs.yaml'
#- include: 'glusterfs/2_init_glusterd_cluster.yaml'
#
## configure heketi
#- include: 'glusterfs/3_create_heketi_user.yaml'
#- include: 'glusterfs/4_configure_shared_storage_for_heketi_db.yaml'
#- include: 'glusterfs/5_create_ssh_for_heketi_share_with_masters.yaml'
#- include: 'glusterfs/6_configure_heketi.yaml'
#- include: 'glusterfs/7_add_storage_to_k8s.yaml'